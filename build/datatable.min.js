/*! datatable 2014-05-15 */
angular.module("ui.datatable",[]).controller("tableController",["$scope",function(a){a.columns=[],a.sorter=[],a.current_page=1,a.no_of_pages=0,getSortName=function(a,b){return"asc"==b?a:"desc"==b?"-"+a:a},a.setCurrentPage=function(b){b>0&&b<=a.no_of_pages&&(a.current_page=b)},a.nextPage=function(){a.current_page<a.no_of_pages&&a.current_page++},a.prevPage=function(){a.current_page>1&&a.current_page--},a.sortStatus=function(b){if(-1!=a.options.sortable.indexOf(b)){var c="sortable";return angular.forEach(a.sorter,function(a){a==getSortName(b)&&(c="asc"),a==getSortName(b,"desc")&&(c="desc")}),c}return null},a.sort=function(b){if(-1!=a.options.sortable.indexOf(b)){var c=a.sortStatus(b);c="sortable"==c?null:c,null!==c&&(index=a.sorter.indexOf(getSortName(b,c)),a.sorter.splice(index,1)),c&&(c="asc"==c?"desc":"asc"),a.sorter.unshift(getSortName(b,c))}},a.getColumns=function(){angular.forEach(a.tableData,function(b){angular.forEach(b,function(b,c){-1==a.columns.indexOf(c)&&a.columns.push(c)})})},a.$watch("search",function(b,c){b!==c&&(a.current_page=1)})}]).filter("displayName",function(){return function(a,b){return angular.forEach(b.options.display_name,function(b){a in b&&(a=b[a])}),a}}).filter("search",function(a){return function(b,c,d){return d.options&&d.options.filter.enable&&c?(columns=d.options.filter.columns,columns?b=a("filter")(b,function(a){var b=!1;for(var d in a)if(a[d]&&-1!=columns.indexOf(d)){var e=String(a[d]).toLowerCase();e.indexOf(c)>-1&&(b=!0)}return b}):a("filter")(b,c)):b}}).filter("range",function(){return function(a,b){b=parseInt(b);for(var c=0;b>c;c++)a.push(c+1);return a}}).filter("paginator",function(a){return function(b,c){var d=c.options.limit?c.options.limit:50;c.no_of_pages=Math.ceil(b.length/d),c.no_of_elements_per_page=d;var e=(c.current_page-1)*c.no_of_elements_per_page;return b=a("limitTo")(b.slice(e),c.no_of_elements_per_page)}}).directive("mgTable",function(){return{scope:{tableData:"=mgData",options:"=mgDataOptions"},controller:"tableController",restrict:"E",templateUrl:"datatable.html",replace:!0,link:function(a){a.getColumns()}}}),angular.module("ui.datatable").run(["$templateCache",function(a){"use strict";a.put("datatable.html",'<div>\n	<div class="col-md-3 pull-right input-group">\n        <span class="input-group-addon">\n          <span class="glyphicon glyphicon-search"></span>\n        </span>\n        <input type="text" placeholder="search" class="form-control" ng-model="search">\n     </div>\n	<table class="table table-striped">\n		<thead>\n			<th ng-repeat="column in columns" ng-click="sort(column)">\n				<div class="sort-icon">\n					<span class="glyphicon glyphicon-chevron-up" ng-show="sortStatus(column) == \'asc\' || sortStatus(column) == \'sortable\'"></span>\n					<span class="glyphicon glyphicon-chevron-down" ng-show="sortStatus(column) == \'desc\' || sortStatus(column) == \'sortable\'"></span>\n				</div>\n				<span>{{ column | displayName:this }}</span>\n			</th>\n		</thead>\n		<tbody>\n			<tr ng-repeat="row in tableData | orderBy: sorter | search: search: this | paginator: this">\n				<td ng-repeat="column in columns">\n					{{ row[column] }}\n				</td>\n			</tr>\n		</tbody>\n	</table>\n	<ul class="pagination">\n	  <li ng-class="{disabled: current_page == 1}"><a href="" ng-click="prevPage()" >&laquo;</a></li>\n	  <li ng-repeat="n in [] | range: no_of_pages" ng-class="{active: n==current_page}"><a href="" ng-click="setCurrentPage(n)" >{{n}}  <span class="sr-only">(current)</span></a></li>\n	  <li ng-class="{disabled: current_page == no_of_pages}"><a href="" ng-click="nextPage()" >&raquo;</a></li>\n	</ul>\n</div>')}]);